"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Stack = exports.DictSet = undefined;
exports.dict = dict;

var _guid = require("./guid");

var _createClass = function () {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
        }
    }return function (Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

function dict() {
    return Object.create(null);
}
var DictSet = exports.DictSet = function () {
    function DictSet() {
        _classCallCheck(this, DictSet);

        this.dict = dict();
    }

    DictSet.prototype.add = function add(obj) {
        if (typeof obj === 'string') this.dict[obj] = obj;else this.dict[(0, _guid.ensureGuid)(obj)] = obj;
        return this;
    };

    DictSet.prototype.delete = function _delete(obj) {
        if (typeof obj === 'string') delete this.dict[obj];else if (obj._guid) delete this.dict[obj._guid];
    };

    return DictSet;
}();
var Stack = exports.Stack = function () {
    function Stack() {
        _classCallCheck(this, Stack);

        this.stack = [];
        this.current = null;
    }

    Stack.prototype.push = function push(item) {
        this.current = item;
        this.stack.push(item);
    };

    Stack.prototype.pop = function pop() {
        var item = this.stack.pop();
        var len = this.stack.length;
        this.current = len === 0 ? null : this.stack[len - 1];
        return item === undefined ? null : item;
    };

    Stack.prototype.isEmpty = function isEmpty() {
        return this.stack.length === 0;
    };

    _createClass(Stack, [{
        key: 'size',
        get: function get() {
            return this.stack.length;
        }
    }]);

    return Stack;
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9AZ2xpbW1lci91dGlsL2xpYi9jb2xsZWN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLEFBQU8sQUFBVyxBQUFVLEFBQUUsQUFBTSxBQUFRLEFBQUMsQUFZN0MsQUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQUNKLEFBQU07V0FBQyxBQUFNLE9BQUMsQUFBTSxPQUFDLEFBQUksQUFBQyxBQUFDLEFBQzdCLEFBQUM7QUFJRCxBQUFNO0lBR0o7dUJBQ0UsQUFBSTs7O2FBQUMsQUFBSSxPQUFHLEFBQUksQUFBSyxBQUFDLEFBQ3hCLEFBQUMsQUFFRCxBQUFHOzs7eUNBQUMsQUFBTSxLQUNSLEFBQUUsQUFBQztZQUFDLE9BQU8sQUFBRyxRQUFLLEFBQVEsQUFBQyxVQUFDLEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBVSxBQUFDLE9BQUcsQUFBRyxBQUFDLEFBQ3pELEFBQUksU0FBQyxBQUFJLEtBQUMsQUFBSSxLQUFDLEFBQVUsc0JBQUMsQUFBVSxBQUFDLEFBQUMsUUFBRyxBQUFHLEFBQUMsQUFDN0MsQUFBTTtlQUFDLEFBQUksQUFBQyxBQUNkLEFBQUMsQUFFRCxBQUFNOzs7Z0RBQUMsQUFBTSxLQUNYLEFBQUUsQUFBQztZQUFDLE9BQU8sQUFBRyxRQUFLLEFBQVEsQUFBQyxVQUFDLE9BQU8sQUFBSSxLQUFDLEFBQUksS0FBQyxBQUFVLEFBQUMsQUFBQyxBQUMxRCxBQUFJLFVBQUMsQUFBRSxBQUFDLElBQUUsQUFBVyxJQUFDLEFBQUssQUFBQyxPQUFDLE9BQU8sQUFBSSxLQUFDLEFBQUksS0FBRSxBQUFXLElBQUMsQUFBSyxBQUFDLEFBQUMsQUFDcEUsQUFBQyxBQUNGOzs7O0FBRUQsQUFBTTtJQUFOO3FCQUNVOzs7YUFBSyxRQUFRLEFBQUUsQUFBQyxBQUNqQjthQUFPLFVBQWMsQUFBSSxBQUFDLEFBc0JuQyxBQUFDLEFBcEJDLEFBQVcsQUFBSTs7O3lDQUlWLEFBQU8sTUFDVixBQUFJO2FBQUMsQUFBTyxVQUFHLEFBQUksQUFBQyxBQUNwQixBQUFJO2FBQUMsQUFBSyxNQUFDLEFBQUksS0FBQyxBQUFJLEFBQUMsQUFBQyxBQUN4QixBQUFDLEFBRUQsQUFBRzs7O3lDQUNEO1lBQUksQUFBSSxPQUFHLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBRyxBQUFFLEFBQUMsQUFDNUI7WUFBSSxBQUFHLE1BQUcsQUFBSSxLQUFDLEFBQUssTUFBQyxBQUFNLEFBQUMsQUFDNUIsQUFBSTthQUFDLEFBQU8sVUFBRyxBQUFHLFFBQUssQUFBQyxJQUFHLEFBQUksT0FBRyxBQUFJLEtBQUMsQUFBSyxNQUFDLEFBQUcsTUFBRyxBQUFDLEFBQUMsQUFBQyxBQUV0RCxBQUFNO2VBQUMsQUFBSSxTQUFLLEFBQVMsWUFBRyxBQUFJLE9BQUcsQUFBSSxBQUFDLEFBQzFDLEFBQUMsQUFFRCxBQUFPOzs7aURBQ0wsQUFBTTtlQUFDLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBTSxXQUFLLEFBQUMsQUFBQyxBQUNqQyxBQUFDLEFBQ0Y7Ozs7OzRCQW5CRyxBQUFNO21CQUFDLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBTSxBQUFDLEFBQzNCLEFBQUMsQUFFRCxBQUFJIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzR3VpZCwgZW5zdXJlR3VpZCB9IGZyb20gJy4vZ3VpZCc7XG5pbXBvcnQgeyBPcHRpb24gfSBmcm9tICcuL3BsYXRmb3JtLXV0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBEaWN0PFQ+IHtcbiAgW2luZGV4OiBzdHJpbmddOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldDxUPiB7XG4gIGFkZCh2YWx1ZTogVCk6IFNldDxUPjtcbiAgZGVsZXRlKHZhbHVlOiBUKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpY3Q8VD4oKTogRGljdDxUPiB7XG4gIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG5leHBvcnQgdHlwZSBTZXRNZW1iZXIgPSBIYXNHdWlkIHwgc3RyaW5nO1xuXG5leHBvcnQgY2xhc3MgRGljdFNldDxUIGV4dGVuZHMgU2V0TWVtYmVyPiBpbXBsZW1lbnRzIFNldDxUPiB7XG4gIHByaXZhdGUgZGljdDogRGljdDxUPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRpY3QgPSBkaWN0PFQ+KCk7XG4gIH1cblxuICBhZGQob2JqOiBUKTogU2V0PFQ+IHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHRoaXMuZGljdFtvYmogYXMgYW55XSA9IG9iajtcbiAgICBlbHNlIHRoaXMuZGljdFtlbnN1cmVHdWlkKG9iaiBhcyBhbnkpXSA9IG9iajtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGRlbGV0ZShvYmo6IFQpIHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIGRlbGV0ZSB0aGlzLmRpY3Rbb2JqIGFzIGFueV07XG4gICAgZWxzZSBpZiAoKG9iaiBhcyBhbnkpLl9ndWlkKSBkZWxldGUgdGhpcy5kaWN0WyhvYmogYXMgYW55KS5fZ3VpZF07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0YWNrPFQ+IHtcbiAgcHJpdmF0ZSBzdGFjazogVFtdID0gW107XG4gIHB1YmxpYyBjdXJyZW50OiBPcHRpb248VD4gPSBudWxsO1xuXG4gIHB1YmxpYyBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFjay5sZW5ndGg7XG4gIH1cblxuICBwdXNoKGl0ZW06IFQpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSBpdGVtO1xuICAgIHRoaXMuc3RhY2sucHVzaChpdGVtKTtcbiAgfVxuXG4gIHBvcCgpOiBPcHRpb248VD4ge1xuICAgIGxldCBpdGVtID0gdGhpcy5zdGFjay5wb3AoKTtcbiAgICBsZXQgbGVuID0gdGhpcy5zdGFjay5sZW5ndGg7XG4gICAgdGhpcy5jdXJyZW50ID0gbGVuID09PSAwID8gbnVsbCA6IHRoaXMuc3RhY2tbbGVuIC0gMV07XG5cbiAgICByZXR1cm4gaXRlbSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGl0ZW07XG4gIH1cblxuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YWNrLmxlbmd0aCA9PT0gMDtcbiAgfVxufVxuIl19